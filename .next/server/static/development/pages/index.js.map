{"version":3,"file":"static/development/pages/index.js","sources":["webpack:///webpack/bootstrap","webpack:///./components/weather_widget.js","webpack:///./helpers/weather_icon.js","webpack:///./pages/index.js","webpack:///external \"@babel/runtime/regenerator\"","webpack:///external \"isomorphic-unfetch\"","webpack:///external \"react\"","webpack:///external \"styled-jsx/style\""],"sourcesContent":[" \t// The module cache\n \tvar installedModules = require('../../../ssr-module-cache.js');\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tvar threw = true;\n \t\ttry {\n \t\t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n \t\t\tthrew = false;\n \t\t} finally {\n \t\t\tif(threw) delete installedModules[moduleId];\n \t\t}\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","import weatherIcon from '../helpers/weather_icon'\n\nexport default ({ weather }) => (\n  <div className=\"weather__widget\">\n    <div className=\"widget__slot slot--left\">\n      <div className=\"weather__widget--city\">\n        <b>{weather.location.city}</b>\n      </div>\n      <div className=\"weather__widget--condition\">\n        {weather.item.condition.text}\n      </div>\n    </div>\n    <div className=\"widget__slot slot--right\">\n      <div className=\"weather__widget--high\">\n        <b>H</b> {weather.item.forecast[0].high}&deg;\n      </div>\n      <div className=\"weather__widget--low\">\n        <b>L</b> {weather.item.forecast[0].low}&deg;\n      </div>\n    </div>\n    <div className=\"widget__slot slot--right\">\n      <img className=\"weather__widget--icon\" \n        src={`static/icons/${weatherIcon(weather.item.condition.code)}.svg`} />\n    </div>\n    <div className=\"widget__slot slot--right\">\n      <div className=\"weather__widget--current\">\n        <b>{weather.item.condition.temp}&deg;</b>\n      </div>\n    </div>\n    {/* Widget Specific Styles */}\n    <style jsx>{`\n      .weather__widget {\n        width: 100%;\n        font-family: sans-serif;\n        letter-spacing: 1px;\n        padding: 1.5rem 1rem;\n        box-sizing: border-box;\n        color: #3b3d3c;\n        opacity: 0;\n        transition: opacity .5s;\n        position: absolute;\n        top: 0;\n        left: 0;\n      }\n      .weather__widget:nth-child(1) {\n        opacity: 1;\n      }\n      .weather__widget--icon {\n        width: 2.25rem;\n        height: 2.25rem;\n        margin-right: .5rem;\n      }\n      .widget__slot {\n        display: inline-block;\n      }\n      .slot--right {\n        float: right;\n      }\n      .weather__widget--current {\n        font-size: 2rem;\n      }\n    `}</style>\n  </div>\n)\n","export default weatherCode => {\n\n  const codeToIconMap = {\n    0: 'wi-tornado',\n    1: 'wi-storm-showers',\n    2: 'wi-tornado',\n    3: 'wi-thunderstorm',\n    4: 'wi-thunderstorm',\n    5: 'wi-snow',\n    6: 'wi-rain-mix',\n    7: 'wi-rain-mix',\n    8: 'wi-sprinkle',\n    9: 'wi-sprinkle',\n    10: 'wi-hail',\n    11: 'wi-showers',\n    12: 'wi-showers',\n    13: 'wi-snow',\n    14: 'wi-storm-showers',\n    15: 'wi-snow',\n    16: 'wi-snow',\n    17: 'wi-hail',\n    18: 'wi-hail',\n    19: 'wi-cloudy-gusts',\n    20: 'wi-fog',\n    21: 'wi-fog',\n    22: 'wi-fog',\n    23: 'wi-cloudy-gusts',\n    24: 'wi-cloudy-windy',\n    25: 'wi-thermometer',\n    26: 'wi-cloudy',\n    27: 'wi-night-cloudy',\n    28: 'wi-day-cloudy',\n    29: 'wi-night-cloudy',\n    30: 'wi-day-cloudy',\n    31: 'wi-night-clear',\n    32: 'wi-day-sunny',\n    33: 'wi-night-clear',\n    34: 'wi-day-sunny-overcast',\n    35: 'wi-hail',\n    36: 'wi-day-sunny',\n    37: 'wi-thunderstorm',\n    38: 'wi-thunderstorm',\n    39: 'wi-thunderstorm',\n    40: 'wi-storm-showers',\n    41: 'wi-snow',\n    42: 'wi-snow',\n    43: 'wi-snow',\n    44: 'wi-cloudy',\n    45: 'wi-lightning',\n    46: 'wi-snow',\n    47: 'wi-thunderstorm',\n    3200: 'wi-cloud',\n    default: 'wi-cloud'\n  }\n\n  if (weatherCode && codeToIconMap[weatherCode]) {\n    return codeToIconMap[weatherCode]\n  } else {\n    return codeToIconMap['default']\n  }\n\n}\n","import React, { Component } from 'react'\nimport fetch from 'isomorphic-unfetch'\nimport WeatherWidget from '../components/weather_widget'\n\nexport default class Index extends Component {\n  constructor(props) {\n    super(props)\n    this.state = { \n      activeIndex: 0, \n      data: props.data\n    }\n    this.timer = this.timer.bind(this)\n    this.addLocation = this.addLocation.bind(this)\n    this.WeatherWidget = React.createRef()\n    this.NewLocation = React.createRef()\n  }\n\n  static async getInitialProps({ req }) {\n    const locations = ['San Diego, CA', 'New York, NY', 'Juneau, AK']\n    \n    const urls = locations.map(location => (`\n      https://query.yahooapis.com/v1/public/yql?q=select * \n      from weather.forecast where woeid in (select woeid from geo.places(1) \n      where text=\"${location}\")\n      &format=json&env=store://datatables.org/alltableswithkeys\n    `))\n\n    const res = await Promise.all(urls.map(fetch)).then(responses =>\n      Promise.all(responses.map(res => res.json())\n    )) // #performance!\n\n    let data = res.map(res => res.query.results ? res.query.results.channel : false)\n    data = data.filter(data => data && data.location) // filter out bad locations\n\n    return { data }\n  }\n\n  componentDidMount() {\n    const intervalId = setInterval(this.timer, 5000)\n    this.setState({ intervalId })\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.state.intervalId)\n  }\n\n  timer() {   \n    const max = this.state.data.length - 1\n    const next = this.state.activeIndex < max ? this.state.activeIndex + 1 : 0\n\n    // this is a little ghetto...\n    const weatherWidgets = this.WeatherWidget.current.getElementsByClassName('weather__widget')\n    const slideIndicators = this.WeatherWidget.current.getElementsByClassName('slide__indicator')\n\n    weatherWidgets[next].style.opacity = '1'\n    weatherWidgets[this.state.activeIndex].style.opacity = '0'\n\n    slideIndicators[next].style.opacity = '1'\n    slideIndicators[this.state.activeIndex].style.opacity = '.7'\n\n    this.setState({ activeIndex: next })\n  }\n\n  jumpTo(index) {\n    clearInterval(this.state.intervalId)\n\n    const weatherWidgets = this.WeatherWidget.current.getElementsByClassName('weather__widget')\n    const slideIndicators = this.WeatherWidget.current.getElementsByClassName('slide__indicator')\n\n    // fanciness all over\n    Array.prototype.slice.call(weatherWidgets).forEach(ww => ww.style.opacity = '0')\n    Array.prototype.slice.call(slideIndicators).forEach(ss => ss.style.opacity = '.7')\n\n    weatherWidgets[index].style.opacity = '1'\n    slideIndicators[index].style.opacity = '1'\n    \n    this.setState({ activeIndex: index }, () => {\n      const intervalId = setInterval(this.timer, 5000)\n      this.setState({ intervalId })\n    })\n  }\n\n  addLocation(e) {\n    e.preventDefault()\n    \n    // This should be a variable somewhere\n    // In fact, there should be a weather API helper in this project\n    const url = `\n      https://query.yahooapis.com/v1/public/yql?q=select * \n      from weather.forecast where woeid in (select woeid from geo.places(1) \n      where text=\"${this.NewLocation.current.value}\")\n      &format=json&env=store://datatables.org/alltableswithkeys\n    `\n\n    // Oh, but some error handling would have been nice... even just a little!!\n    fetch(url).then(response => {\n      response.json().then(({ query }) => { // let's assume the api is always just working lol\n        if (query.results && query.results.channel && query.results.channel.location) {\n          let data = this.state.data.concat([query.results.channel])\n          this.setState({ data }, () => this.jumpTo(data.length - 1))\n          // SOOOO... storing a cookie would be super easy\n          // In fact... technically... we could do the could do the cookie bit server side\n          // Then, render the slider a bit differently with a <noscript>\n          // Result would be that this whole thing would work with NO JAVASCRIPT :)))))\n          // So many chins on my emjoi!\n        } else {\n          // LAME!\n          alert('Invalid Location, try again!')\n        }\n      })\n    }) // nah... ;) who needs error handling anyways?\n  }\n\n  render() {\n    const { data } = this.state\n\n    return (\n      <div>\n        <div className=\"widgets__slider\" ref={this.WeatherWidget}>\n          {/* Weather Widgets */}\n          {data.map((weather, i) => <WeatherWidget weather={weather} key={i} />)}\n          {/* Slide Indicators */}\n          <div className=\"slide__indicators\">\n            {data.map((weather, i) => (\n              <div className=\"slide__indicator\" key={i} onClick={e => this.jumpTo(i)}></div>\n            ))}\n          </div>\n          {/* Add Location Form */}\n          <form className=\"add__location\" onSubmit={this.addLocation}>\n            <label>Add Location (City, State)</label>\n            <input type=\"text\" ref={this.NewLocation} />\n            <button type=\"submit\">&#43;</button>\n          </form>\n          {/* General Styles */}\n          <style jsx>{`\n            .widgets__slider {\n              position: relative;\n              width: 100%;\n              max-width: 600px;\n              margin: 0 auto;\n              box-shadow: 0px 0px 2px rgba(0, 0, 0, .5);\n              color: #3b3d3c;\n              padding-top: 88px;\n            }\n            .add__location {\n              background: #eee;\n              font-family: sans-serif;\n              letter-spacing: 1px;\n              padding: 1em;\n              box-sizing: border-box;\n            }\n            .add__location label {\n              display: block;\n              margin-bottom: 5px;\n              font-size: .9em;\n            }\n            .add__location input {\n              border: none;\n              width: calc(100% - 60px);\n              padding: 6px 8px;\n              font-size: .8em;\n            }\n            .add__location button {\n              width: 35px;\n              float: right;\n              background: #3b3d3c;\n              color: #fff;\n              border: none;\n              font-size: 1.2em;\n              padding: 0 0 .2em 0;\n            }\n            .slide__indicators {\n              text-align: center;\n            }\n            .slide__indicator {\n              width: 10px;\n              height: 10px;\n              display: inline-block;\n              background: #3b3d3c;\n              margin: 5px;\n              border-radius: 20px;\n              opacity: .7;\n              transition: opacity .5s;\n              cursor: pointer;\n            }\n            .slide__indicator:nth-child(1) {\n              opacity: 1;\n            }\n          `}</style>\n        </div>\n      </div>\n    )\n  }\n}\n","module.exports = require(\"@babel/runtime/regenerator\");","module.exports = require(\"isomorphic-unfetch\");","module.exports = require(\"react\");","module.exports = require(\"styled-jsx/style\");"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;ACxFA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAvBA;AAAA;AAAA;AAAA;AADA;;;;;;;;;;;;ACFA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlDA;AACA;AAoDA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7DA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AATA;AAUA;AACA;;;AAqBA;AACA;AACA;AAAA;AAAA;AACA;;;AAEA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AAAA;AAAA;AACA;;;AAEA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;;;AAEA;AAAA;AACA;AAAA;AAGA;AACA;AAAA;AACA;AAOA;AACA;AAAA;AACA;AADA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AAAA;AACA;AADA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAbA;AAAA;AAAA;AAAA;AA0EA;;;;;;;;;;;;AA/KA;AACA;AAEA;AAAA;AAAA;;AAOA;AAAA;AACA;AAAA;AADA;AACA;;AADA;AAEA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;AA/BA;AACA;;;;;;;;;;;;;;;;;;;;;;;;ACLA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;A","sourceRoot":""}